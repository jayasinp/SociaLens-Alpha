<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}{% endblock %} - SociaLens</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!--All html files will be wrapped in a main-content-container div to seperate content window from nav and top bar-->
    <style>
        body, html {
            height: 100%;
            margin: 0;
        }
        /* LIGHT MODE */
        .main-content-container {
            padding-top: 60px; 
            background-color: #fff; /* Change background to white */
        }
    
        .wrapper {
            display: flex;
            min-height: 100vh;
        }
    
        .top-bar {
            justify-content: start;
            width: 100%;
            background-color: #f5f5f7; /* Light gray background */
            color: black; /* Changed text color for contrast */ 
            padding: 5px 20px; 
            text-align: left;
            position: fixed;
            top: 0; 
            z-index:3;
            border-bottom: 1px solid #e2e2e2; /* Bottom border */
        }
    
        .sidebar {
            min-width: 250px;
            background: #fbfbfb; /* Slightly lighter gray background */
            color: #1f1f1f; /* Dark text color */
            padding: 60px 15px 15px 15px;
            position: sticky;
            top: 0;
            height: 100vh;
            overflow-y: auto; 
            border-right: 1px solid #e2e2e2; /* Right border */
        }

        .header-title { 
            color: black; /* Set the default color for the entire h3 to black */
            }

        .header-title span.lens { 
            color: #306fe3; /* Blue for "Lens" */    
        }

        .header-title span.version {
            color: #cb444a; /* Specific color for the version */
        } 
    
        .sidebar h3 {
            margin-bottom: 20px;
        }
    
        .nav-link {
            color: #1f1f1f; /* Dark text color */
            padding: 10px 15px; 
            display: block; 
            transition: background-color 0.3s ease-in-out, border-radius 0.3s ease-in-out; 
            border-radius: 20px; 
            margin: 2px 0; 
        }

        .nav-link .emoji { 
            font-size: 1.3em; /* Increase emoji size */
}
    
        .nav-link:hover, .active .nav-link {
            background-color: #306fe3; /* Blue highlight color */
            color: #fff; /* White text color on highlight */
            padding: 10px 15px; 
            border-radius: 10px; 
        }
    
        .content {
            flex-grow: 1;
            background: #fff;
            padding: 35px 20px 20px 20px;
        }

        label.check {
            cursor: pointer;
            padding: 2%;
        }

        label.check input {
            position: absolute;
            top: 0;
            left: 0;
            visibility: hidden;
            pointer-events: none;
        }

        label.check span {
            padding: 7px 14px;
            border: 2px solid #039BE5;
            display: inline-block;
            color: #039BE5;
            border-radius: 3px;
            text-transform: uppercase;
        }

        label.check input:checked + span {
            border-color: #039BE5;
            background-color: #039BE5;
            color: #fff;
        }
        .mt-100 {
            margin-top: 100px
            }
            
        .mb-30{
            margin-bottom: 30px;
            }
            
        .card {
            position: relative;
            display: flex;
            flex-direction: column;
            min-width: 0;
            word-wrap: break-word;
            background-color: #fff;
            background-clip: border-box;
            border: 1px solid #d2d2dc;
            border-radius: 0
            }
            
        .card .card-body {
            padding: 1.25rem 1.75rem
            }
            
        .card-body {
            flex: 1 1 auto;
            padding: 1.25rem
            }
            
        .card .card-title {
            color: #000000;
            margin-bottom: 0.625rem;
            text-transform: capitalize;
            font-size: 0.875rem;
            font-weight: 500
            }
            
        .card .card-description {
            margin-bottom: .875rem;
            font-weight: 400;
            color: #76838f
            }
            
        p {
            font-size: 0.875rem;
            margin-bottom: .5rem;
            line-height: 1.5rem
            }
            
            .breadcrumbs {
        color: #838387; /* Gray breadcrumb text color */
        margin-left: 20px; 
            }

            .breadcrumbs a {
                color: #838387; 
}

            .file-explorer {
                border: 1px solid #ddd; 
                padding: 20px;
                border-radius: 5px;
            }
            body, html {
    height: 100%;
    margin: 0;
}

            /* DARK MODE */
            body.dark-mode, body.dark-mode html {
                background-color: #191b28; /* Deep dark background */
                color: #d4d7dc; /* Softer, neutral light text */
            }

            body.dark-mode .main-content-container {
                background-color: #202336; /* Slightly lighter content background */
            }

            body.dark-mode .top-bar {
                background-color: #1e2030; /* Slightly darker top bar */
                border-bottom: 1px solid #262a40; /* Subtler border */
            }

            body.dark-mode .sidebar {
                background: #23263c; 
                border-right: 1px solid #262a40;
            }

            body.dark-mode .header-title { 
                color: #e8ebf2; /* Slightly muted default text */
            }

            body.dark-mode .header-title span.lens { 
                color: #6caee0; /* Softer 'Lens' blue */  
            }

            body.dark-mode .header-title span.version {
                color: #e16a7a; /* Softer version number color */
            } 

            body.dark-mode .sidebar h3 {
            color: #d4d7dc; /* Match regular text color in dark mode */
            }

            body.dark-mode .nav-link {
                color: #bbc0cc; /* Slightly grayer unselected links */
            }

            body.dark-mode .nav-link:hover, 
            body.dark-mode .active .nav-link {
                background-color: #6caee0; /* Same blue for hover/active */
                color: #191b28; /* Very dark text on hover */
            }

            body.dark-mode .content {
                background: #202336; 
            }

            body.dark-mode label.check span {
                border-color: #6caee0; /* Blue border in dark mode */
                color: #6caee0;
            }

            body.dark-mode label.check input:checked + span {
                background-color: #6caee0; /* Blue background on selection */
                color: #191b28; /* Very dark text on selection */
            }

            body.dark-mode .card {
                background-color: #282c45;
                border-color: #303654;
            }

            body.dark-mode .breadcrumbs { 
                color: #a6abb8; /* Less bright breadcrumbs */
            }

            body.dark-mode .breadcrumbs a {
                color: #a6abb8; 
            }

            body.dark-mode .file-explorer { 
                background-color: #1e2030;  /* Slightly darker file explorer */
                border-color: #262a40; 
            }

    </style>
    
</head>
<!--Top navigation bar for SociaLens logo and the Breadcrumbs for position awareness-->
<div class="top-bar d-flex justify-content-start align-items-center" style="height: 60px;">
    <h3 class="header-title">
        Socia<span class="lens">Lens</span> <span class="version">‚±≠v.1.71</span> 
    </h3>
    <div class="breadcrumbs"> 
        {% for label, url in breadcrumbs %}
            <a href="{{ url }}" class="breadcrumb-link">{{ label }}</a>
            {% if not loop.last %} &gt; {% endif %}
        {% endfor %}
    </div>
    <div class="top-bar d-flex justify-content-between align-items-center" style="height: 60px;"> <h3 class="header-title">
        Socia<span class="lens">Lens</span> <span class="version">‚±≠v.1.71</span> 
    </h3>
    <div class="breadcrumbs"> 
        </div>

    <label class="check"> <input type="checkbox"> 
        <span>üåô</span> </label>
</div>
</div>
<!--Side menu bar-->
<div class="wrapper">
    <nav class="sidebar">
        <ul class="nav flex-column">
            <li class="nav-item">
                <a href="/" class="nav-link {{ 'active' if request.path == '/' else '' }}">
                    <span class="emoji">üè†</span> Home
                </a>
            </li>
        </ul>
        <h5 class="text-primary">Data Utilities</h5> 
        <ul class="nav flex-column">
            <li class="nav-item">
                <a href="/data-upload" class="nav-link {{ 'active' if request.path == '/data-upload' else '' }}">
                    <span class="emoji">‚òÅÔ∏è </span> Upload Dataset
                </a>
            </li>
            <li class="nav-item">
                <a href="/data-cleaner" class="nav-link {{ 'active' if request.path == '/data-cleaner' else '' }}">
                    <span class="emoji">üõÅ </span> Cleaner 
                </a>
            </li> 
            <li class="nav-item">
                <a href="/data-scraper" class="nav-link {{ 'active' if request.path == '/data-scraper' else '' }}">
                    <span class="emoji">üïµÔ∏è </span> Scraper 
                </a>
            </li>
            <li class="nav-item">
                <a href="/explore-data" class="nav-link {{ 'active' if request.path == '/explore-data' else '' }}">
                    <span class="emoji">üîé </span> Explore Data 
                </a>
            </li>            
            <hr> 
        </ul>
        <h5 class="text-primary">Analytics</h5>
        <ul class="nav flex-column">
            <li class="nav-item">
                <a href="/descriptive-statistics" class="nav-link {{ 'active' if request.path == '/descriptive-statistics' else '' }}">
                    <span class="emoji">üìä </span> Descriptive Statistics
                </a>
            </li>
            <li class="nav-item">
                <a href="/network-statistics" class="nav-link {{ 'active' if request.path == '/network-statistics' else '' }}">
                    <span class="emoji">‚ö°Ô∏è </span> Network Statistics
                </a>
            </li>
            <li class="nav-item">
                <a href="/network-visualiser" class="nav-link {{ 'active' if request.path == '/network-visualiser' else '' }}">
                    <span class="emoji">üï∏Ô∏è </span> Network Visualiser
                </a>
            </li>
            <li class="nav-item">
                <a href="/report-generator" class="nav-link {{ 'active' if request.path == '/report-generator' else '' }}">
                    <span class="emoji">üìÑ </span> Report Generator
                </a>
            </li> 
            <hr> 
        </ul>
        <h5 class="text-primary">Other</h5>
        <ul class="nav flex-column">
            <li class="nav-item">
                <a href="/selector" class="nav-link {{ 'active' if request.path == '/selector' else '' }}">
                    <span class="emoji">‚§µÔ∏è </span> Selector Demo
                </a>
            </li>
            <li class="nav-item">
                <a href="/login" class="nav-link {{ 'active' if request.path == '/login' else '' }}">
                    <span class="emoji">üë§ </span> User Profile
                </a>
            </li>
            <li class="nav-item">
                <a href="/settings" class="nav-link {{ 'active' if request.path == '/settings' else '' }}">
                    <span class="emoji">‚öôÔ∏è </span> Settings
                </a>
            </li>
            <li class="nav-item">
                <a href="/support" class="nav-link {{ 'active' if request.path == '/support' else '' }}">
                    <span class="emoji">üõ†Ô∏è </span> Support
                </a>
            </li>
            <li class="nav-item">
                <a href="/feedback" class="nav-link {{ 'active' if request.path == '/feedback' else '' }}">
                    <span class="emoji">üí¨ </span> Feedback
                </a>
            </li>
        </ul>
    </nav>   
    <div class="content">
        {% block content %}{% endblock %}
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
    const themeToggle = document.querySelector('.check input');

    themeToggle.addEventListener('change', function() {
        if (this.checked) {
            document.body.classList.add('dark-mode');
            localStorage.setItem('theme', 'dark'); // Store preference
        } else {
            document.body.classList.remove('dark-mode');
            localStorage.setItem('theme', 'light');
        }
    });

    // Load the saved theme preference on page load
    const currentTheme = localStorage.getItem('theme') || 'light'; 
    if (currentTheme === 'dark') {
        document.body.classList.add('dark-mode');
        themeToggle.checked = true;
    }
</script>
</body>
</html>
